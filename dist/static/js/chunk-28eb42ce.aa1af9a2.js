(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28eb42ce"],{3024:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",[r("v-card-title",[e._v("假期义工统一提交")]),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{rules:e.rules,label:"义工名称","prepend-icon":"mdi-pen"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("v-dialog",{ref:"dateDialog",attrs:{"return-value":e.form.date,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.form,"date",t)},"update:return-value":function(t){return e.$set(e.form,"date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"义工日期",rules:e.rules,"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}},"v-text-field",o,!1),a))]}}]),model:{value:e.modalDate,callback:function(t){e.modalDate=t},expression:"modalDate"}},[r("v-date-picker",{attrs:{scrollable:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalDate=!1}}},[e._v(" 取消 ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dateDialog.save(e.form.date)}}},[e._v(" 确认 ")])],1)],1),r("v-dialog",{ref:"timeDialog",attrs:{"return-value":e.form.time,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.form,"time",t)},"update:return-value":function(t){return e.$set(e.form,"time",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"义工时间","prepend-icon":"mdi-clock-time-four-outline",readonly:"",rules:e.rules},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}},"v-text-field",o,!1),a))]}}]),model:{value:e.modalTime,callback:function(t){e.modalTime=t},expression:"modalTime"}},[e.modalTime?r("v-time-picker",{attrs:{"full-width":""},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalTime=!1}}},[e._v(" 取消 ")]),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.timeDialog.save(e.form.time)}}},[e._v(" 确定 ")])],1):e._e()],1),r("v-simple-table",[r("thead",[r("td",[e._v("学号")]),r("td",[e._v("删除")])]),r("tbody",[e._l(e.form.stuSelected,(function(t,a){return r("tr",{key:a},[r("td",[e._v(e._s(t))]),r("td",[r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){return e.delFromList(a)}}},[r("v-icon",{attrs:{dark:""}},[e._v(" mdi-minus ")])],1)],1)])})),r("tr",[r("td",[r("v-select",{attrs:{"prepend-icon":"mdi-switch",label:"选定学生",items:e.stulst,"item-text":"name","item-value":"id"},model:{value:e.stuNew,callback:function(t){e.stuNew=t},expression:"stuNew"}})],1),r("td",[r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:e.addToList}},[r("v-icon",{attrs:{dark:""}},[e._v(" mdi-plus ")])],1)],1)])],2)]),r("v-text-field",{attrs:{rules:e.rules,label:"义工证明材料（请上传到ftp并输入ftp地址）","prepend-icon":"mdi-pen"},model:{value:e.form.ftp,callback:function(t){e.$set(e.form,"ftp",t)},expression:"form.ftp"}}),r("v-text-field",{attrs:{rules:e.rules,label:"义工描述","prepend-icon":"mdi-pen"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),r("v-text-field",{attrs:{rules:e.rules,label:"校内义工时长","prepend-icon":"mdi-pen"},model:{value:e.form.inside,callback:function(t){e.$set(e.form,"inside",t)},expression:"form.inside"}}),r("v-text-field",{attrs:{rules:e.rules,label:"校外义工时长","prepend-icon":"mdi-pen"},model:{value:e.form.outside,callback:function(t){e.$set(e.form,"outside",t)},expression:"form.outside"}}),r("v-text-field",{attrs:{rules:e.rules,label:"大型活动义工时长","prepend-icon":"mdi-pen"},model:{value:e.form.large,callback:function(t){e.$set(e.form,"large",t)},expression:"form.large"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.submit}},[e._v(" 提交 ")])],1)],1)],1)},o=[],i=(r("a4d3"),r("e01a"),r("a434"),r("b0c0"),r("d3b7"),r("96cf"),r("1da1")),s=r("c13c"),n=r("a841"),l=r("5464"),c=r("bc3a"),d=r.n(c),m={data:function(){return{modalDate:!1,modalTime:!1,stulst:[],stuNew:void 0,form:{name:void 0,date:void 0,time:null,stuSelected:[],ftp:void 0,description:void 0,inside:void 0,outside:void 0,large:void 0},rules:[Object(l["a"])()]}},mounted:function(){this.pageload()},methods:{pageload:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("loading",!0),t.next=3,n["a"].fetchStudentList(e.$store.state.info.class,(function(t){t?e.stulst=t:s["a"].toasts.error("获取学生列表失败")}));case 3:e.$store.commit("loading",!1),console.log(e.stulst);case 5:case"end":return t.stop()}}),t)})))()},addToList:function(){var e=!1;for(var t in""!=this.stuNew&&void 0!=this.stuNew||(e=!0),this.form.stuSelected)if(this.form.stuSelected[t]==this.stuNew){e=!0;break}e?s["a"].toasts.error("请不要重复报名"):this.form.stuSelected.push(this.stuNew),this.stuNew=""},delFromList:function(e){this.form.stuSelected.splice(e,1)},submit:function(){var e=this;this.$store.commit("loading",!0),d.a.post("/volunteer/holiday",{name:this.form.name,date:this.form.date,time:this.form.time,stuId:this.form.stuSelected,description:"假期义工："+this.form.ftp+"；"+this.form.description,inside:parseInt(this.form.inside),outside:parseInt(this.form.outside),large:parseInt(this.form.large)}).then((function(e){"SUCCESS"==e.data.type?s["a"].toasts.success(e.data.message):s["a"].toasts.error(e.data.message)})).catch((function(e){s["a"].toasts.error(e)})).finally((function(){e.$store.commit("loading",!1)}))}}},u=m,f=(r("3b7f"),r("2877")),p=r("6544"),v=r.n(p),b=r("8336"),x=r("b0af"),h=r("99d9"),k=r("a523"),g=r("2e4b"),w=r("169a"),$=r("4bd4"),_=r("132d"),V=r("b974"),y=r("1f4f"),S=r("2fa4"),T=r("8654"),D=r("c964"),C=Object(f["a"])(u,a,o,!1,null,"8ddae3e6",null);t["default"]=C.exports;v()(C,{VBtn:b["a"],VCard:x["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VContainer:k["a"],VDatePicker:g["a"],VDialog:w["a"],VForm:$["a"],VIcon:_["a"],VSelect:V["a"],VSimpleTable:y["a"],VSpacer:S["a"],VTextField:T["a"],VTimePicker:D["a"]})},"3b7f":function(e,t,r){"use strict";r("d751")},d751:function(e,t,r){}}]);